<div class="modal-content">
    <div style="background-color: var(--dark-blue-background);" class="modal-header">
        <div style="text-align: left; color: white;" class="modal-title h4 col-4"
        id="example-modal-sizes-title-lg">
        FOLIO : {{currentHuesped.folio}}
        <!-- <label>
          {{huesped.folio}}</label> -->
      </div>
      <div style="text-align: center; color: white;" class="text-center modal-title h4 col-4"
        id="example-modal-sizes-title-lg">
        Modifica Reserva
        <!-- <label>
          {{huesped.folio}}</label> -->
      </div>
      <button style=" background-color:var(--dark-blue-background); font-weight: bold; color: white;" class="btn col-1" (click)="closeModal()"> X </button>
    </div>
</div>

<div  class="cursor-default overlay overlay-block modal-body" style="background-color: #e6e9ed;">
    <form [formGroup]="formGroup" class="form form-label-right" style="background-color: #e6e9ed">

      <div class="container-fluid" style="padding: 16px;">
        <!-- Date Picker -->
        <div class="row">
          <!-- Arrival Date Picker -->
          <div class="col-12">
            <mat-form-field class="w-100">
              <mat-label>Fecha de Llegada</mat-label>
              <input
                  matInput
                  [matDatepicker]="llegadaPicker"
                  [formControl]="llegadaDateFC"
                  [min]="minDate"
                  (dateChange)="onArrivalDateChange()"
                  placeholder="Selecciona la fecha de llegada"
              >
              <mat-datepicker-toggle matIconSuffix [for]="llegadaPicker"></mat-datepicker-toggle>
              <mat-datepicker #llegadaPicker></mat-datepicker>
          </mat-form-field>
          </div>
      
          <!-- Departure Date Picker -->
          <div class="col-12">
              <mat-form-field class="w-100">
                  <mat-label>Fecha de Salida</mat-label>
                  <input
                    matInput
                    [matDatepicker]="salidaPicker"
                    [formControl]="salidaDateFC"
                    [min]="llegadaDateFC.value"
                    (dateChange)="onDepartureDateChange()"
                    placeholder="Selecciona la fecha de salida"
                  >
                  <mat-datepicker-toggle matSuffix [for]="salidaPicker"></mat-datepicker-toggle>
                  <mat-datepicker #salidaPicker></mat-datepicker>
              </mat-form-field>
          </div>
      </div>
      
      
    
        <!-- Noches -->
        <div class="row">
            <div class="col-12 d-flex flex-column align-items-center">
                <div class="label-text">Noches:</div>
                <div class="value-text">
                    {{ stayNights }}
                </div>
            </div>
        </div>
    
        <!-- Habitacion -->
        <div class="row">
            <div class="col-12 d-flex flex-column align-items-center">
                <div class="label-text">Habitacion Actual:</div>
                <div class="value-text">
                    {{ currentHuesped.habitacion + '-' + currentHuesped.numeroCuarto }}
                </div>
            </div>
        </div>
    </div>
    
    
    
    



            <div style="margin-top: 10px;" class="row">
              <div class="form-group col-lg-6">
                <label style="color:#00506a; font-weight: bold;" class="form-label">Adultos</label>
                <div class="input-group">
                  <div class="input-group-append">
                    <button style="background-color: transparent;border-right: 2px solid #e6e9ed; border-left: 2px solid #dadcdf; border-top : 2px solid #dadcdf; border-bottom: 2px solid #dadcdf;" class="btn btn-secondary" (click)="minus()" type="button" ng-click="countVal=countVal+1">
                      <i class="fa fa-minus">
                      </i>
                    </button>
                  </div>
                  <input
                    style="background-color: #e6e9ed; border-top: 2px solid #dadcdf; border-bottom: 2px solid #dadcdf;  border-left: 2px solid #e6e9ed;"
                    class="text-center input-group form-control form-control-lg form-control-solid"
                    #controladultos
                    placeholder=""
                    name="adultos"
                    [value]="quantity"
                    formControlName="adultos"
                    [class.is-invalid]="isControlInvalidFirst('adultos')"
                    [class.is-valid]="isControlValidFirst('adultos')"
                    >
                    <div
                    class="invalid-feedback"
                    *ngIf="controlHasErrorFirst('max', 'adultos')"
                    >
                    Maximo {{maxPeople}} Adultos
                    </div>
                  <div class="input-group-append">
                    <button style="border-right: 2px solid #dadcdf; border-top: 2px solid #dadcdf; border-bottom: 2px solid #dadcdf; background-color: transparent;" class="btn btn-secondary" (click)="plus()" type="button">
                      <i class="fa fa-plus">
                      </i>
                    </button>
                  </div>
                </div>
              </div>

              <div class="form-group col-lg-6">

                <label style="color:#00506a; font-weight: bold;" class="form-label">Niños</label>
                <div class="input-group">
                  <div class="input-group-append">
                    <button style="background-color: transparent; border-left: 2px solid #dadcdf; border-top: 2px solid #dadcdf; border-top: 2px solid #dadcdf; border-bottom: 2px solid #dadcdf;" class="btn btn-secondary" (click)="minusNin()" type="button">
                      <i class="fa fa-minus">
                      </i>
                    </button>
                  </div>
                  <input
                    style="background-color: #e6e9ed; border-top: 2px solid #dadcdf; border-bottom: 2px solid #dadcdf; border-left: 2px solid #e6e9ed;"
                    class="text-center input-group form-control form-control-lg form-control-solid" placeholder=""
                    name="ninos"
                    [value]="quantityNin"
                    formControlName="ninos"
                    [class.is-invalid]="isControlInvalidFirst('ninos')"
                    [class.is-valid]="isControlValidFirst('ninos')"
                    >
                  <div class="input-group-append"
                    class="invalid-feedback"
                    *ngIf="controlHasErrorFirst('maxlength', 'ninos')"
                  >
                    Maximo {{ maxChildren }} Niños
                  </div>
                  <div class="input-group-append">
                    <button style="background-color: transparent; border-right: 2px solid #dadcdf; border-top: 2px solid #dadcdf; border-bottom: 2px solid #dadcdf;" class="btn btn-secondary" (click)="plusNin()" type="button">
                      <i class="fa fa-plus">
                      </i>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="row" style="margin-top: 5px;">
              <label style="color:#00506a; font-weight: bold;" class="form-group col-lg-6" >Habitación </label>

              <div class="col-lg-12" style="margin-top:10px">
                <mat-select #tipodeCuartoDropDown
                  class="form-control form-control-lg "
                  name="habitacion"
                  formControlName="habitacion"
                  placeholder="-- Seleccione Tipo de Habitacion para cambio -- "
                  required
                  (selectionChange)="buscaDispo($event.value)"
                >
                    <mat-option value="0">-- Selecciona Habitación --</mat-option>
                    <!-- <mat-option value="1">Todos los Tipos de Cuartos</mat-option> -->
                    <mat-option *ngFor="let tipoCuarto of roomCodes" [value]="tipoCuarto">{{tipoCuarto.Codigo.replace("_"," ")}} </mat-option>
                </mat-select>
              </div>
            </div>
            <!-- Spinner -->
            <ng-container *ngIf="isLoading">
              <app-inline-spinner></app-inline-spinner>
            </ng-container>

            <ng-container *ngIf="editHuesped && !reactivaReserva === false">
              <ng-container *ngFor="let codigosCuarto of availavilityRooms; ">
                <div *ngIf="codigosCuarto.Codigo === cuarto" style="font-weight:bold; color: rgba(128, 128, 128, 0.623);" class=" modal-header"><h2 style="color: black">{{codigosCuarto.Codigo.replace("_"," ").toUpperCase()}}</h2> (Cap. Max.: {{codigosCuarto.Adultos}})</div>
              </ng-container>
          
              <table mat-table [dataSource]="roomRates(cuarto)">
                <ng-container matColumnDef="Tarifa">
                  <th mat-header-cell *matHeaderCellDef> Tarifa </th>
                  <td mat-cell *matCellDef="let element"> {{element.Tarifa}} </td>
                </ng-container>
            
                <ng-container matColumnDef="$ Promedio x Noche">
                  <th mat-header-cell *matHeaderCellDef> $ Promedio x Noche </th>
                  <td mat-cell *matCellDef="let element"> {{ratesTotalCalc(element,stayNights)/stayNights | currency : 'MXN' : 'symbol' : '1.0-0'}}</td>
                </ng-container>
            
                <ng-container matColumnDef="Total">
                  <th mat-header-cell *matHeaderCellDef> Total </th>
                  <td mat-cell *matCellDef="let element"> {{ratesTotalCalc(element,stayNights) | currency : 'MXN' : 'symbol' : '1.0-0'}}</td>
                </ng-container>
          
                <ng-container matColumnDef="Acciones">
                  <th mat-header-cell *matHeaderCellDef> Acciones </th>
                  <td  (click)="$event.stopPropagation()" mat-cell *matCellDef="let element; let i = index "> 
                    <mat-radio-group [name]="cuarto">
                      <mat-radio-button [disabled]="revisaCapacidad(cuarto)" [checked]="element.Tarifa === currentHuesped.tarifa" [value]="element[i]" (change)="tarifaRadioButton(ratesTotalCalc(element,stayNights),element,$event, cuarto)"></mat-radio-button>   
                    </mat-radio-group>
                  </td>
                </ng-container>
          
                <!--Habitacion List Column-->
                <ng-container matColumnDef="disclaimer">
                  <td mat-footer-cell *matFooterCellDef colspan="2">
                    <section style="display: contents;
                    align-items: center;
                    height: 60px;">
                      <h4 style="margin-top: 10px;"> Habitación: </h4>
                      <ng-container *ngFor="let habitacion of preAsignadasArray">
                        <ng-container *ngIf="habitacion.codigo === cuarto && currentHuesped.numeroCuarto === habitacion.numero">
                          <mat-checkbox
                          [disabled]="(currentHuesped.numeroCuarto === habitacion.numero ? false : habitacion.disabled) || revisaCapacidad(cuarto)"
                          [checked]="habitacion.checked"
                          (change)="preAsignar(habitacion.numero, habitacion.codigo, $event.checked, habitacion.disabled)">
                          <label style="font-weight: bold; margin-right: 7%">{{ habitacion.numero }}</label>
                        </mat-checkbox> 
                        </ng-container>
                      </ng-container>
                    </section>
                  </td>
                </ng-container>
          
          
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                <tr mat-footer-row *matFooterRowDef="['disclaimer'] "  class="example-second-footer-row"></tr>
              </table>
          
          </ng-container>
            <!-- Avaibility Table -->
            <ng-container *ngIf="cuarto!=='' && !editHuesped" style="margin-top: 10px;">
              <mat-accordion [style]="accordionDisplay" class="example-headers-align" multi>
                <mat-expansion-panel  [expanded]="step === 1"  hideToggle>
                  <!-- HEADER DEL ACCORDION DE DISPONIBILIDAD -->
                  <mat-expansion-panel-header *ngIf="!checkAvaibility(cuarto)" [ngStyle]="{'background-color': revisaCapacidad(cuarto) ? '#fa6d7c' : '#99d284' }">
                    <mat-panel-title>
                      DISPONIBILIDAD
                    </mat-panel-title>
                    <mat-panel-description *ngIf="maxPeopleFlag">
                      <small> <label  style="font-weight:bold">
                        {{ mensajeCapacidad }}
                      </label></small>
                    </mat-panel-description> 
                  </mat-expansion-panel-header>
                  <!-- [FIN] HEADER DEL ACCORDION DE DISPONIBILIDAD -->
                  <mat-expansion-panel-header *ngIf="checkAvaibility(cuarto)" [ngStyle]="{'background-color': revisaCapacidad(cuarto) ? '#fa6d7c' : '#fa6d7c' }">
                    <mat-panel-title>
                      SIN DISPONIBILIDAD
                    </mat-panel-title>
                    <mat-panel-description>
                     <!--Type your name and age-->
                     Consulte Otro Tipo de Habitacion
                      <!-- <mat-icon>account_circle</mat-icon> -->
                    </mat-panel-description>
                  </mat-expansion-panel-header>
<br>
                  <div  class="table-responsive angular-bootstrap-table">

                    <!-- CUANDO ES UN SOLO TIPO DE CUARTO EN CONSULTA -->
                    <ng-container *ngIf="cuarto !== '1' || checkAvaibility(cuarto)">
                      <ng-container *ngFor="let codigosCuarto of availavilityCodeRooms; ">
                        <div *ngIf="codigosCuarto.Codigo===cuarto" style="font-weight:bold; color: rgba(128, 128, 128, 0.623);" class=" modal-header"><h2 style="color: black">{{codigosCuarto.Codigo.replace("_"," ").toUpperCase()}}</h2> (Cap. Max.: {{codigosCuarto.Adultos}})</div>
                      </ng-container>

                      <table mat-table [dataSource]="roomRates(cuarto)">
                        <ng-container matColumnDef="Tarifa">
                          <th mat-header-cell *matHeaderCellDef> Tarifa </th>
                          <td mat-cell *matCellDef="let element"> {{element.Tarifa}} </td>
                        </ng-container>
                    
                        <ng-container matColumnDef="$ Promedio x Noche">
                          <th mat-header-cell *matHeaderCellDef> $ Promedio x Noche </th>
                          <td mat-cell *matCellDef="let element"> {{ratesTotalCalc(element,stayNights)/stayNights | currency : 'MXN' : 'symbol' : '1.0-0'}} </td>
                        </ng-container>
                    
                        <ng-container matColumnDef="Total">
                          <th mat-header-cell *matHeaderCellDef> Total </th>
                          <td mat-cell *matCellDef="let element"> {{ratesTotalCalc(element,stayNights) | currency : 'MXN' : 'symbol' : '1.0-0'}} </td>
                        </ng-container>
              
                        <ng-container matColumnDef="Acciones">
                          <th mat-header-cell *matHeaderCellDef> Acciones </th>
                          <td  (click)="$event.stopPropagation()" mat-cell *matCellDef="let element; let i = index "> 
                            <mat-radio-group [name]="cuarto">
                              <mat-radio-button [disabled]="revisaCapacidad(cuarto)" [value]="element[i]" (change)="tarifaRadioButton(ratesTotalCalc(element,stayNights),element,$event, cuarto)"></mat-radio-button>   
                            </mat-radio-group>
                          </td>
                        </ng-container>
  
                        <!--Habitacion List Column-->
                        <ng-container matColumnDef="disclaimer">
                          <td mat-footer-cell *matFooterCellDef colspan="2">
                            <section style="display: contents;
                            align-items: center;
                            height: 60px;">
                              <h4 style="margin-top: 10px;"> Habitación: </h4>
                              <ng-container *ngFor="let habitacion of preAsignadasArray">
                                <ng-container *ngIf="habitacion.codigo === cuarto">
                                    <mat-checkbox [disabled]="habitacion.disabled || revisaCapacidad(cuarto)" formControlName="checkbox" #checked [checked]="habitacion.checked" (change)="preAsignar(habitacion.numero,habitacion.codigo,checked.checked, habitacion.disabled)"><label style="font-weight: bold; margin-right: 7%">{{ habitacion.numero }}</label></mat-checkbox> &nbsp; 
                                </ng-container>
                              </ng-container>
                            </section>
                          </td>
                        </ng-container>

                
                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                        <tr mat-footer-row *matFooterRowDef="['disclaimer'] sticky: true"  class="example-second-footer-row"></tr>
                      </table>

                    </ng-container>
                    <!-- [FIN] CUANDO ES UN SOLO TIPO DE CUARTO EN CONSULTA -->
                  </div>
                </mat-expansion-panel>
              </mat-accordion>
             </ng-container>
<!--FIN DE DISPONIBILIDAD-->
</form>
<br>
<form [formGroup]="currentDataFormGroup">
    <div style="background-color:var(--dark-blue-background);" class="modal-tittle">
        <div style="color: white; padding-top: 1%; padding-bottom: 1%;" class="text-center modal-title h5 col-12">
          Datos del Húesped
        </div>
       </div>
  
      <div class="cursor-default  modal-body" style="background-color: #dadcdf">
          <div class="row">
            <div class="col-lg-12">
              <label class="form-label">Nombre Completo</label>
              <input
                type="text"
                class="form-control form-control-lg form-control-solid"
                name="nombre"
                placeholder="Nombre completo"
                autocomplete="off"
                [value]="currentHuesped.nombre"
                [class.is-invalid]="isControlInvalid('nombre')"
                formControlName="nombre"
              /><!--[class.is-valid]="isControlValid('nombre')"-->
              <div class="valid-feedback" *ngIf="isControlValid('nombre')">
                Nombre Escrito Correctamente
              </div>
              <div
                class="invalid-feedback"
                *ngIf="controlHasError('required', 'nombre')"
              >
                Campo Requerido*
              </div>
              <div
                class="invalid-feedback"
                *ngIf="controlHasError('minlength', 'nombre')"
              >
                Minimo 3 letras
              </div>
              <div
                class="invalid-feedback"
                *ngIf="controlHasError('maxlength', 'nombre')"
              >
                Maximo 100 letras
              </div>
              <mat-error *ngIf="nombre!.errors?.required">
                * Obligatorio
              </mat-error>
            </div>
          </div>
  
  
          <div class="form-group row">
  
          <div class="col-lg-6">
            <label class="form-label">Email</label>
            <input
              type="email"
              class="form-control form-control-lg form-control-solid"
              name="email"
              placeholder="Email"
              autocomplete="off"
              [value]="currentHuesped.email"
              formControlName="email"
              [class.is-invalid]="isControlInvalid('email')"/>
          </div>
  
          <div class="col-lg-6">
            <label class="form-label">Teléfono</label>
            <input
              type="tel"
              class="form-control form-control-lg form-control-solid"
              name="telefono"
              placeholder="Teléfono"
              autocomplete="off"
              [value]="currentHuesped.telefono"
              formControlName="telefono"
              [class.is-invalid]="isControlInvalid('telefono')"
              [class.is-valid]="isControlValid('telefono')"/>
            <!-- <div class="invalid-feedback" *ngIf="isControlValid('telefono')">
              Teléfono Invalido
            </div> -->
           <div class="valid-feedback" *ngIf="isControlValid('telefono')">
              Teléfono Escrito Correctamente
            </div>
            <div
              class="invalid-feedback"
              *ngIf="controlHasError('minlength', 'telefono')"
            >
              Minimo 10 numeros
            </div>
            <div
              class="invalid-feedback"
              *ngIf="controlHasError('maxlength', 'telefono')"
            >
              Maximo 14 numeros
            </div>
            <div
            class="invalid-feedback"
            *ngIf="controlHasError('pattern', 'telefono')"
            >
             Solo se permiten letras
          </div>
          </div>
  
        </div>
      </div> 
</form>
<button style="width: 100%;" class="btn btn-success" (click)="onSubmit()">Guardar Cambios</button>
</div>

  